(()=>{const l={full:"full",mini:"mini-sidebar"};function o(e){localStorage.setItem("sidebartype",e)}function r(e){document.body.setAttribute("data-sidebartype",e)}$(function(){const a=window.location.pathname;var e=localStorage.getItem("sidebartype")||l.full,t=(o(e),r(e),$("#main-wrapper"));t.after($("<div>",{class:"dark-transparent sidebartoggler"})),t.AdminSettings({ThemeBg:"purple_theme",SidebarType:e}),document.querySelectorAll(".sidebartoggler").forEach(function(e){e.addEventListener("click",function(){document.querySelectorAll(".sidebartoggler").forEach(function(e){e.checked=!0}),document.getElementById("main-wrapper").classList.toggle("show-sidebar"),document.querySelectorAll(".sidebarmenu").forEach(function(e){e.classList.toggle("close")}),document.body.getAttribute("data-sidebartype")===l.full?(r(l.mini),o(l.mini)):(r(l.full),o(l.full))})}),$("#droph").one("click",function(){const i=$("#guildselector");i.length&&$.ajax({url:"/api/guilds",method:"GET",contentType:"application/json",success:function(e){var e=e.data.filter(e=>DiscordAPIHandler.parsePermissions(e.permissions).includes("ManageGuild")).map(e=>{var{name:e,id:t,iconURL:i}=e,n=a.split("/"),n=a.replace(n[2],t);return $("<li>").append($("<a>",{class:"py-3 px-3 d-flex align-items-center dropdown-item rounded-3",href:n,"data-bs-toggle":"tooltip","data-bs-placement":"right","data-bs-title":e}).append($("<span>",{class:"me-3"}).append($("<img>",{class:"rounded-circle",src:i,alt:e,width:"35",height:"35",loading:"lazy"})),$("<div>",{class:"w-75 d-inline-block v-middle hide-menu"}).append($("<h6>",{class:"mb-1 fw-semibold text-wrap",text:e}))))[0].outerHTML}).join(""),t=i.find(".simplebar-content");(t.length?t:i).append(e),$("#guildselector_preloader").remove()},error:function(e,t,i){console.error(i)}})}),0<document.getElementsByClassName("side-mini-panel").length&&((t=function(){var t=window.location.href,i=document.querySelectorAll("#sidebarnav a");for(let e=0;e<i.length;e++)if(i[e].href===t)return i[e];return null}())&&t.classList.add("active"),document.querySelectorAll("#sidebarnav a").forEach(function(e){e.addEventListener("click",function(e){var t=this.classList.contains("active"),i=this.closest("ul");t?(this.classList.remove("active"),i.classList.remove("active"),(t=this.nextElementSibling)&&t.classList.remove("in")):(i.querySelectorAll("ul").forEach(function(e){e.classList.remove("in")}),i.querySelectorAll("a").forEach(function(e){e.classList.remove("active")}),(t=this.nextElementSibling)&&t.classList.add("in"),this.classList.add("active"))})}),document.querySelectorAll("#sidebarnav > li > a.has-arrow").forEach(function(e){e.addEventListener("click",function(e){e.preventDefault()})}),t=(t=(t=t?.closest("nav[class^=sidebar-nav]"))&&t?.id||"menu-right-mini-1")[t.length-1],document.getElementById("menu-right-mini-"+t).classList.add("d-block"),document.getElementById("mini-"+t).classList.add("selected"),document.querySelectorAll("ul#sidebarnav ul li a.active").forEach(function(e){e.closest("ul").classList.add("in"),e.closest("ul").parentElement.classList.add("selected")}),document.querySelectorAll(".mini-nav .mini-nav-item").forEach(function(e){e.addEventListener("click",function(){var e=this.id;document.querySelectorAll(".mini-nav .mini-nav-item").forEach(function(e){e.classList.remove("selected")}),this.classList.add("selected"),document.querySelectorAll(".sidebarmenu nav").forEach(function(e){e.classList.remove("d-block")}),document.getElementById("menu-right-"+e).classList.add("d-block"),r(l.full)})})),logger.info("Sidebar initialized with type:",e)}),$.fn.AdminSettings=function(e){const i="fixed",n="absolute",a=this.attr("id");const s=$.extend({},{Theme:!0,SidebarPosition:!1,HeaderPosition:!0,BoxedLayout:!1,ThemeBg:"aqua_theme"},e),t={AdminSettingsInit:function(){t.ManageSidebarType(),t.ManageSidebarPosition()},ManageSidebarType:function(){switch(s.SidebarType){case l.full:r(l.full),o(l.full);function e(){(0<window.innerWidth?window.innerWidth:this.screen.width)<1300?(r(l.mini),o(l.mini)):(r(l.full),o(l.full))}window.addEventListener("DOMContentLoaded",e),window.addEventListener("resize",e);break;case l.mini:r(l.mini),o(l.mini)}},ManageSidebarPosition:function(){var e=s.SidebarPosition,t=s.HeaderPosition;switch(s.Layout){case"vertical":case"horizontal":!0===e?$("#"+a).attr("data-sidebar-position",i):$("#"+a).attr("data-sidebar-position",n),!0===t?$("#"+a).attr("data-header-position",i):$("#"+a).attr("data-header-position","relative")}}};t.AdminSettingsInit()}})();