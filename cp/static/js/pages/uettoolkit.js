function compelsubject(t,n,e){return 1==t?'<i class="ti ti-check text-danger"></i>':'<i class="ti ti-x text-success"></i>'}function parseUETDocs(t,n,e){return`<div class='d-flex align-items-center gap-3'>
        <button type="button" disabled id="${Math.random().toString(36).substring(7)}" class='btn btn-primary'><i class="ti ti-eye"></i></button>
        <button nns-external-window nns-external-url="${t}" class='btn btn-primary'><i class="ti ti-download"></i></button>
    </div>`}function formatLinkTailieu(t,n,e){return isUrl(t)?`<a href="${t}" target="_blank" class="btn btn-outline-primary"><i class="ti ti-download"></i></a>`:t}function formatViewInfoButton(t,n,e){return`<button class="btn btn-primary findClassmates" data-bs-toggle="tooltip" data-bs-title="Tìm bạn cùng lớp" class_id='${t.ml}' term_id='${t.term_id}'><i class="ti ti-radar-2"></i></button>`}function isUrl(t){try{return new URL(t),!0}catch(t){return!1}}(()=>{InjectCSS("@media (max-width: 991.98px) { #mainTab { padding-bottom: 1rem !important } }");logger.info("UET Toolkit v5"),"true"===localStorage.getItem("utkused")&&localStorage.removeItem("utkused");var t=parseInt(localStorage.getItem("utkused"),10);(isNaN(t)||t<5)&&(T(),_(),localStorage.setItem("utkused",5..toString()));let h={permissions:{"detail-user":"Xem thông tin người dùng","detail-program":"Xem thông tin chương trình đào tạo","view-learning-time":"Xem thời gian học tập","detail-learning-time":"Xem chi tiết thời gian học tập","view-academic-consult":"Xem tư vấn học vụ","detail-academic-consult":"Xem chi tiết tư vấn học vụ","view-graduate":"Xem khả năng tốt nghiệp","detail-graduate":"Xem chi tiết khả năng tốt nghiệp","detail-prmotion":"Xem chi tiết khen thưởng kỷ luật"},letterGradeMapping:[{limit:4,letter:"F",score:0},{limit:5,letter:"D",score:1},{limit:5.5,letter:"D+",score:1.5},{limit:6.5,letter:"C",score:2},{limit:7,letter:"C+",score:2.5},{limit:8,letter:"B",score:3},{limit:8.5,letter:"B+",score:3.5},{limit:9,letter:"A",score:3.7},{limit:11,letter:"A+",score:4}],gpaWarnings:[{limit:2,class:"text-danger",icon:"ti ti-alert-triangle",text:"Quả GPA này căng đấy, cẩn thận nhé."},{limit:2.5,class:"text-warning",icon:"ti ti-alert-triangle",text:"GPA của bạn không cao, hãy cố gắng hơn nữa."},{limit:3.2,class:"text-info",icon:"ti ti-alert-triangle",text:"GPA của bạn ở mức trung bình, hãy cố gắng hơn nữa."},{limit:1/0,class:"text-success",icon:"ti ti-check",text:"Bạn đang học tốt. Hãy tiếp tục giữ vững thành tích của mình."}],scoreChartLabel:["A+","A","B","B+","C","C+","D","D+","F"],colorData:["#008000","#598e00","#919900","#c8a100","#ffa500","#ff8b00","#ff6f00","#ff4c00","#ff0000"],API:{home:"https://daotao.uet.vnu.edu.vn",resetPassword:"https://idp.vnu.edu.vn/auth/realms/vnu/login-actions/reset-credentials",signIn:"https://daotao.uet.vnu.edu.vn/api/login",signOut:"https://daotao.uet.vnu.edu.vn/api/logout",getQldt:"/api/uettoolkit/qldt?{query}",getDsThi:"/api/uettoolkit/dsthi?{query}",getScore:"https://daotao.uet.vnu.edu.vn/api/graduates/{id}",getPromotion:"https://daotao.uet.vnu.edu.vn/api/prmotions/{id}",getLearningTime:"https://daotao.uet.vnu.edu.vn/api/learningtimes/_term/?limit=100",getStudentOverview:"https://daotao.uet.vnu.edu.vn/api/students/{id}/_warnings",getUser:"https://daotao.uet.vnu.edu.vn/api/user/info",getProgram:"https://daotao.uet.vnu.edu.vn/api/programs/{id}",getAcademicConsult:"https://daotao.uet.vnu.edu.vn/api/academicconsultings/",getTermList:"/api/uettoolkit/termlist",getTKB:"/api/uettoolkit/tkb",getTailieu:"/api/uettoolkit/tailieu"},TokenValidTime:6048e5,tkbTemplate:{mamh:"Mã môn",mh:"Học phần",stc:"Số tín",ml:"Mã lớp học",gv:"Giáo viên",b:"Số buổi",thu:"Thứ",tiet:"Tiết",gd:"Giảng đường",gc:"Ghi chú"},malop:{CN1:{name:"Công nghệ thông tin",id:"C"},CN2:{name:"Kỹ thuật máy tính",id:"K"},CN3:{name:"Vật lý kĩ thuật",id:"V"},CN4:{name:"Cơ kỹ thuật",id:"H"},CN5:{name:"Công nghệ kỹ thuật xây dựng",id:"XD"},CN6:{name:"Công nghệ kỹ thuật cơ điện tử",id:"M"},CN7:{name:"Công nghệ hàng không vũ trụ",id:"A-E"},CN8:{name:"Khoa học máy tính",id:"CA"},CN9:{name:"Công nghệ điện tử viễn thông",id:"Đ"},CN10:{name:"Công nghệ nông nghiệp",id:"AG"},CN11:{name:"Kỹ thuật điều khiển và tự động hoá",id:"M"},CN12:{name:"Trí tuệ nhân tạo",id:"AI"},CN13:{name:"Kỹ thuật năng lượng",id:"E"},CN14:{name:"Hệ thống thông tin",id:"T"},CN15:{name:"Mạng máy tính và truyền thông dữ liệu",id:"N"},CN16:{name:"Công nghệ thông tin định hướng thị trường Nhật Bản",id:"J"},CN17:{name:"Kỹ thuật Robot",id:"R"},CN18:{name:"Thiết kế công nghiệp và đồ hoạ",id:""}}},e=/@vnu\.edu\.vn$/,n=/[0-9]{8}/,i=document.getElementById("loginrequire"),P=document.getElementById("loginrequire_msg"),a=document.getElementById("signinvnu"),o=document.getElementById("signinvnu2");t=document.getElementById("forgetpassword");let r=document.getElementById("signinform"),V=document.getElementById("signinformWithId"),l=$(".logintrigger"),s=document.getElementById("vnuemail");var D=document.getElementById("vnupassword");let c=$("#vnuid"),d=$(".forcereloaddata"),O=document.getElementById("gpachart_overview"),j=document.getElementById("uet_info_card"),U=document.getElementById("uet_permissions_card"),K=document.getElementById("uet_graduate_check_card"),g=$("#tkb-table"),u=$("#qldt-table"),m=$("#showLearning"),p=$("#dsthi_masv"),b=$("#dsthi_search"),w=$("#find_modal"),v=$("#select_term_id");function f(t){var n=t?"show":"hide";$("#maindashboard")[n](),t?($("#mainTab li.list-group-item.authRequire").show(),$("#mainTab li.list-group-item.idRequire").show()):($("#mainTab li.list-group-item.authRequire").hide(),$("#mainTab li.list-group-item.idRequire").hide(),$("#home-tab").tab("show"))}function y(){a.innerHTML="Đăng nhập",a.hasAttribute("disabled")&&a.removeAttribute("disabled")}function k(t,n){P.innerText=t,"success"==n?(i.classList.add("alert-success","show"),i.classList.contains("alert-danger")&&i.classList.remove("alert-danger")):"error"==n&&(i.classList.add("alert-danger","show"),i.classList.contains("alert-success"))&&i.classList.remove("alert-success")}function C(){d.css("display",""),l.html("Đăng xuất"),l.off("click").on("click",()=>{new Promise((n,e)=>{var t=H("vnutoken");t||e(new Error("Bạn chưa đăng nhập vào tài khoản VNU.")),$.ajax({url:h.API.signOut,contentType:"application/json",method:"POST",headers:{Authorization:"Bearer "+t.token},success:function(t){"OK"==t.status&&n()},error:function(t){e(t)}})}).then(()=>{NotificationHandler.show({type:"success",content:"Đăng xuất thành công.",title:"Thành công"})}).catch(t=>{S(t,"signout")}),T(),_(),window.location.reload()}),l.addClass("btn-danger").removeClass("btn-primary"),["data-bs-toggle","data-bs-target"].forEach(t=>{l.removeAttr(t)})}function T(){N("vnutoken")}function _(){Object.keys(localStorage).forEach(t=>{t.startsWith("uet")&&N(t)})}function x(t,n){n=JSON.stringify(n),localStorage.setItem(t,(t=n,t=Base64.encode(t),CryptoJS.AES.encrypt(t,"sieudangyeu").toString()))}function H(t){var n,t=localStorage.getItem(t);return t?JSON.parse((n=t,n=CryptoJS.AES.decrypt(t,"sieudangyeu").toString(CryptoJS.enc.Utf8),Base64.decode(n))):null}function N(t){localStorage.removeItem(t)}async function L(t,n,e=!1,i=!0){let a={token:""};if(!i||(a=await H("vnutoken"))){if(e)await N(t);else{var e=await H(t),o=await H(t+"expire");if(e&&Date.now()<o)return e}try{var r,l=await $.ajax({url:n,method:"GET",contentType:"application/json",headers:i?{Authorization:"Bearer "+a?.token}:{}});if("OK"==l.status&&l.results)return r=Date.now()+h.TokenValidTime,await x(t,l.results),await x(t+"expire",r),l.results}catch(t){S(t,"signin")}}return null}async function I(t,n=!1,e=!1){return await L("uetclasses_"+t,h.API.getQldt.replace("{query}",t),n,e)}async function M(t,n=!1,e=!1){return await L("uetdsthi_"+t,h.API.getDsThi.replace("{query}",t),n,e)}async function G(){v.empty();let n=document.createDocumentFragment();var t,e,i=new Option("Lựa chọn học kì","0",!0,!0);i.disabled=!0,n.appendChild(i);try{e=t=!1,(await L("uettermlist",h.API.getTermList,t,e)).forEach(t=>{t=new Option(t.text,t.value);n.appendChild(t)}),v.append(n)}catch(t){logger.error("Failed to load term list:",t)}}function E(t,n,e){var i=document.createElement("div");i.className="mb-2",i.innerHTML=`<i class="icon ${e} me-2 text-secondary"></i>${t}: <strong>${n}</strong>`,j.appendChild(i)}function B(t){let a=[0,0,0,0,0,0,0,0,0];return t.details.forEach((t,n)=>{t.count=n+1;var e,i=t.pnt_official;for(e of h.letterGradeMapping)if(i<e.limit){t.pnt_letter=e.letter,t.pnt_official4=e.score;break}a[h.scoreChartLabel.indexOf(t.pnt_letter)]++}),{score:t,scoreData:a}}function X(t){t.permissions.forEach(t=>{var n;t=t,t=h.permissions[t]||t,(n=document.createElement("div")).className="mb-2",n.innerHTML=`<i class="icon ti ti-check me-2 text-success"></i><strong>${t}</strong>`,U.appendChild(n)}),window.ContentHandler.ToggleMainContent("#uet_permissions_card",!0)}function W(t){t=t.score;$("#graduate_alert").text(t.note1),t.notes.forEach((t,n)=>{var e;t=t,(e=document.createElement("div")).className="mb-2",e.innerHTML=`<i class="icon ti ti-pencil me-2 text-secondary"></i><strong>${t}</strong>`,K.appendChild(e)}),window.ContentHandler.ToggleMainContent("#uet_graduate_check_card",!0)}async function Y(n){v.off("change").on("change",async function(){let e=$(this).val();var t;0!=e&&(window.ContentHandler.ToggleMainContent("#uet_accordion_qldt",!1),t=await{SinhvienLmh:{masvTitle:n.username,term_id:e}},t=(await I($.param(t),!0)).map((t,n)=>({...t,count:n+1,findmate:{ml:t.ml,term_id:e}})),u.bootstrapTable("load",t),$(".findClassmates").off("click").on("click",async function(){window.ContentHandler.ToggleLoading(this,!0);var t=$(this).attr("class_id"),n=$(this).attr("term_id"),t=await I($.param({SinhvienLmh:{tenlopmonhocTitle:t,term_id:n}}));let i=[];t.forEach((t,n)=>{var e=(t=>{var t=t.split("/"),n=(new Date).getFullYear(),n=(i=t[0].match(/QH-(\d+)-I/))?n-parseInt(i[1],10):0;let e=t[1].replace("CQ-","").replace(/\d/g,"");var i=(i=e.match(/(\d)(?=[^\d]*$)/))?parseInt(i[1],10):0,a=Object.keys(h.malop).find(t=>{var t=h.malop[t].id.toLowerCase(),n=e.toLowerCase();return 1<t.length?t===n:n.startsWith(t)});let o=""+h.malop[a].name;return 0!==i&&(o+=" • Lớp: "+i),0!=n&&(o+=" • Năm học: "+n),t[1].includes("CLC")&&(o+=" • Chất lượng cao"),o})(t.lkh);i.push(`
                <div class="col-12 col-md-6 col-lg-4">
                  <div class="card hover-img">
                    <div class="card-body text-center border-bottom">
                      <img src="${client.cdn}/static/media/image/avatars/user-5.jpg" alt="logo-img" class="rounded-1 img-fluid" width="80" height="80">
                      <div class="mt-n2">
                        <span class="badge text-bg-primary text-white">${t.gc}</span>
                        <h4 class="card-title mt-3" data-bs-toggle="tooltip" data-bs-title="${t.lkh}">${t.ht}</h4>
                        <p class="text-primary fs-3 fw-semibold mb-0">${e}</p>
                      </div>
                    </div>
                    <ul class="px-2 py-2 list-unstyled d-flex align-items-center justify-content-center mb-0">
                      <li class="position-relative">
                        <h6 class="card-title p-2 mb-0">Mã sinh viên: <span class="text-success">${t.msv}</span></h6>
                      </li>
                      <li class="position-relative">
                        <a class="text-danger d-flex align-items-center justify-content-center p-2 fs-5 rounded-circle fw-semibold" href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-title="Tố cáo sinh viên">
                          <i class="ti ti-flag"></i>
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>`)});n=`
            <div class="container-fluid">
              <div class="d-flex flex-column flex-sm-row justify-content-between gap-3 mb-3">
                <div class="d-block">
                  <div class="position-relative">
                    <input type="search" class="form-control py-2 ps-5" placeholder="Tìm kiếm sinh viên" aria-label="Search" id="search_input">
                    <i class="ti ti-search position-absolute top-50 start-0 translate-middle-y fs-6 ms-3"></i>
                  </div>
                </div>
              </div>

              <div class="row g-3" nns-search-list nns-search-input="search_input">${i.join("")}</div>
            </div>`;w.find(".modal-body").html(n),w.modal("show"),window.ContentHandler.ToggleLoading(this,!1)}),window.ContentHandler.ToggleMainContent("#uet_accordion_qldt",!0))})}async function F(){t=n=!1;var t,n=await L("uettkb",h.API.getTKB,n,t);function e(){Object.keys(h.tkbTemplate).forEach((t,n)=>{window.ContentHandler.ToggleMultiSelect($(".bootstrap-table-filter-control-"+t),{placeholder:h.tkbTemplate[t]})})}g.bootstrapTable({...window.CustomBT_Config,cookieIdTable:"uet_tkb_table",toolbar:"#tkb-toolbar",data:n}),e();let i=!1;g.on("toggle.bs.table",function(t){(i=!i)&&setTimeout(()=>{e()},500)}),window.ContentHandler.ToggleMainContent("#uet_tkb_card",!0)}function R(){new Promise(async(t,n)=>{e=!(i=!1);var e,i=(await L("uetacademicconsult",h.API.getAcademicConsult,i,e)).data;i.forEach((t,n)=>{t.count=n+1,t.file_path=t.file_path?h.API.home+t.file_path:t.external_link}),$("#resources-table").bootstrapTable({...window.CustomBT_Config,cookieIdTable:"uet_resources_table",toolbar:"#resources-toolbar",data:i}),window.ContentHandler.ToggleMainContent("#uet_resources_card",!0),t()})}function S(t,n){logger.error("UETToolkit",t),"signin"==n?(window.ContentHandler.ToggleValidation(r.querySelector("input[type='password']"),!1),401==t.status?($("#wrongauth_alert").show(),NotificationHandler.show({type:"error",content:"Đăng nhập thất bại. Vui lòng kiểm tra lại email và mật khẩu.",title:"Lỗi"})):(NotificationHandler.show({type:"error",content:"Đã có lỗi xảy ra khi đăng nhập. Lỗi phổ biến là **CERT-DATE-INVALID**,  xảy ra khi máy chủ của UET không được gia hạn certificate. Truy cập vào [web trường](https://daotao.uet.vnu.edu.vn/) và ấn tiếp tục truy cập để bypass lỗi này.",title:"Lỗi"}),window.ContentHandler.OpenExternalWindow(h.API.home,"Đăng nhập vào UET")),y()):NotificationHandler.show({type:"error",content:"Đã có lỗi xảy ra khi đăng xuất.",title:"Lỗi"})}function J(){return new Promise((r,t)=>{var n,e;e=!(n=!1),L("uetuser",h.API.getUser,n,e).then(async t=>{var n,e,i,a,o;t?(i=t.addition_info.prg1,o=!(a=!1),i=await L("uetprogram",h.API.getProgram.replace("{id}",i),a,o),a=t.username,e=!(o=!1),a=await L("uetstudentoverview",h.API.getStudentOverview.replace("{id}",a),o,e),e=!(o=!1),n=await L("uetscore_"+(n=t.username),h.API.getScore.replace("{id}",n),o,e),r({...t,program:i,score:n,student_overview:a})):r(null)})})}async function A(){var t=await J();if(!t)return k(a="Không thể lấy thông tin người dùng. Vui lòng thử lại sau.","error"),NotificationHandler.show({type:"error",content:a});var n,e,i,a=t.student_overview,o=(a&&(o=(i=t).name??"Người dùng",n=i.avatar??client.cdn+"/static/media/image/logouet.png",e=(d=i.student_overview).student_year,s=d.term_name,d=d.student_avg,$("#uet_banner_avt").attr("src",n).attr("alt",o),$("#uet_banner_hi").text("Xin chào, "+o),$("#uet_banner_desc").text(`Sinh viên năm ${e} khoa `+i.program.name),$("#uet_banner_term_name").text(s),$("#uet_banner_student_avg").text(d),$("#uet_banner_estimate_graduate_type").text(3.6<=(n=d)?"Xuất sắc":3.2<=n?"Giỏi":2.5<=n?"Khá":2<=n?"Trung bình":"Yếu"),window.ContentHandler.ToggleMainContent("#uet_banner",!0)),a.student_avg);if(o){var r,l=o;for(r of h.gpaWarnings)if(l<r.limit){$("#uet_warning_icon").addClass(r.class+" "+r.icon),$("#uet_warning_text").text(r.text);break}window.ContentHandler.ToggleMainContent("#uet_warning",!0)}(async t=>{t=B(t.score).scoreData,window.ApexCharts||(await window.LoadHandler.js("https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.49.1/apexcharts.min.js"),await window.LoadHandler.css("https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.49.1/apexcharts.min.css")),new ApexCharts(O,{series:t,chart:{type:"pie",fontFamily:"inherit",height:240,sparkline:{enabled:!0},animations:{enabled:!0}},fill:{opacity:1},labels:h.scoreChartLabel,grid:{strokeDashArray:4},colors:h.colorData,legend:{show:!0,position:"bottom",offsetY:12,markers:{width:10,height:10,radius:100},labels:{colors:"var(--bs-heading-color)",useSeriesColors:!1},itemMargin:{horizontal:8,vertical:8}},tooltip:{fillSeriesColor:!1},dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t,n){return t.toFixed(1)+"%"}}}).render(),window.ContentHandler.ToggleMainContent("#uet_chart_gpa",!0)})(t),e=B((e=t).score).score,$("#grade-table").bootstrapTable({...window.CustomBT_Config,cookieIdTable:"uet_grade_table",toolbar:"#grade-toolbar",data:e.details}),$("#grade-table").bootstrapTable("refreshOptions",{exportOptions:{fileName:"Bảng điểm sinh viên"}}),window.ContentHandler.ToggleMainContent("#uet_accordion_score",!0),(i=(i=t).program.credits).forEach((t,n)=>{t.count=n+1}),$("#programs-table").bootstrapTable({...window.CustomBT_Config,cookieIdTable:"uet_programs_table",toolbar:"#programs-toolbar",data:i}),$("#programs-table").bootstrapTable("refreshOptions",{exportOptions:{fileName:"Khung chương trình đào tạo"}}),window.ContentHandler.ToggleMainContent("#uet_accordion_programs",!0),q(t);var s="#mainTab a";let c="UETselectedTab";$(s).on("click",function(t){localStorage.setItem(c,$this.attr("href"))});var d=UrlHandler.getHash()||localStorage.getItem(c);$(s+`[href="${d}"]`).tab("show")}function q(o){$("#person-tab").one("show.bs.tab",function(){var t,n,e,i,a;n=(t=o).username,e=t.score,i=(a=t.student_overview).student_year,a=a.term_name,E("Tên",t.name??"Người dùng","ti ti-user"),E("Ngày sinh",e.std_dob,"ti ti-calendar"),E("Nơi sinh",e.std_pob,"ti ti-map"),E("Email",t.email,"ti ti-at"),E("Mã số sinh viên",n,"ti ti-id-badge"),E("Năm học",i,"ti ti-calendar"),E("Khoa",t.program.name,"ti ti-book"),E("Học kỳ",a,"ti ti-bookmark"),E("Đăng nhập lần cuối",bt_dateformatter(moment(t.last_login)),"ti ti-clock-hour-4"),window.ContentHandler.ToggleMainContent("#uet_info_card",!0),X(o),W(o)}),$("#resource-tab").one("show.bs.tab",function(){R()}),$("#dsthi-tab").one("show.bs.tab",function(){(async t=>{var n=await M($.param({id:t.username}),!0);if(!n)return NotificationHandler.show({type:"error",content:"Không thể lấy thông tin danh sách thi. Vui lòng thử lại sau.",title:"Lỗi"}),window.ContentHandler.ToggleMainContent("#uet_dsthi_card",!1);n.forEach((t,n)=>{var e=t["Ngày thi"]+" "+t["Giờ thi"],e=moment(e,"DD/MM/YYYY HH:mm").isBefore(moment());t.state=!!e}),p.val(t.username),$("#dsthi-table").bootstrapTable({...window.CustomBT_Config,checkboxHeader:!1,cookieIdTable:"uet_dsthi_table",toolbar:"#dsthi-toolbar",data:n}),window.ContentHandler.ToggleMainContent("#uet_dsthi_card",!0)})(o)}),$("#tkb-tab").one("show.bs.tab",function(){F().then(()=>{m.on("change",function(){1==$(this).prop("checked")?I().then(t=>{if(!t)return NotificationHandler.show({type:"error",content:"Bạn cần ấn vào mục **Danh sách lớp môn học** và chọn đúng kì học trùng với thời khoá biểu hiện tại để lọc thông tin."}),$(this).prop("disabled",!0),$(this).prop("checked",!1);t=t.map(t=>t.ml);g.bootstrapTable("filterBy",{ml:t})}):g.bootstrapTable("filterBy",{})})})}),$("#panelsStayOpen-qldt").one("show.bs.collapse",function(){(async t=>{await G(),await Y(t),t=$("#select_term_id option").not("[value='0']").first().val(),await u.bootstrapTable({...window.CustomBT_Config,cookieIdTable:"qldt_table",toolbar:"#qldt-toolbar"}),u.bootstrapTable("refreshOptions",{exportOptions:{fileName:"DANH SÁCH LỚP MÔN HỌC"}}),v.val(t).trigger("change"),window.ContentHandler.ToggleMainContent("#uet_accordion_qldt",!0)})(o).then(()=>{m.prop("disabled",!1)})})}async function Q(){window.ContentHandler.ToggleLoading(b,!0),window.ContentHandler.ToggleMainContent("#uet_dsthi_card",!1);var t=p.val();return t?t.match(n)?(t=await M($.param({id:t}),!0))?(t.forEach((t,n)=>{var e=t["Ngày thi"]+" "+t["Giờ thi"],e=moment(e,"DD/MM/YYYY HH:mm").isBefore(moment());t.state=!!e}),$("#dsthi-table").bootstrapTable("load",t),window.ContentHandler.ToggleMainContent("#uet_dsthi_card",!0),void window.ContentHandler.ToggleLoading(b,!1)):(window.ContentHandler.ToggleMainContent("#uet_dsthi_card",!0),window.ContentHandler.ToggleLoading(b,!1),window.NotificationHandler.show({type:"error",content:"Không thể tìm thấy thông tin về lịch thi của sinh viên này.",title:"Lỗi"})):(window.ContentHandler.ToggleLoading(b,!1),window.ContentHandler.ToggleMainContent("#uet_dsthi_card",!0),window.NotificationHandler.show({type:"error",content:"Mã số sinh viên không hợp lệ. Vui lòng kiểm tra lại.",title:"Lỗi"})):(window.ContentHandler.ToggleLoading(b,!1),window.ContentHandler.ToggleMainContent("#uet_dsthi_card",!0),window.NotificationHandler.show({type:"error",content:"Vui lòng nhập mã số sinh viên để tìm kiếm.",title:"Lỗi"}))}D.addEventListener("keyup",function(t){"Enter"===t.key&&a.click()}),c.on("keyup",function(t){"Enter"===t.key&&o.click()}),d.on("click",function(){_(),window.location.reload()}),t.addEventListener("click",function(){window.ContentHandler.OpenExternalWindow(h.API.resetPassword,"Quên mật khẩu")}),a.addEventListener("click",function(){window.ContentHandler.ToggleLoading(a,!0);var t=document.querySelector("#modalLoginWithCredential input[type='email']").value,n=document.querySelector("#modalLoginWithCredential input[type='password']").value;t&&t.match(e)||window.ContentHandler.ToggleValidation(r.querySelector("input[type='email']"),!1),n||window.ContentHandler.ToggleValidation(r.querySelector("input[type='password']"),!1),r.checkValidity()?(window.ContentHandler.ToggleValidation(r.querySelector("input[type='email']"),!0),window.ContentHandler.ToggleValidation(r.querySelector("input[type='password']"),!0),r.classList.add("was-validated"),a.innerHTML="Đang đăng nhập...",(async(t,n)=>{t=t.trim();try{var e=await $.ajax({url:h.API.signIn,method:"POST",data:JSON.stringify({email:t,password:n}),contentType:"application/json"});if("OK"==e.status&&e.results)return e.results;throw new Error("Đăng nhập thất bại. Vui lòng kiểm tra lại email và mật khẩu.")}catch(t){throw t}})(t,n).then(t=>{x("vnutoken",{token:t.token,expire:Date.now()+t.expire_in}),NotificationHandler.show({type:"success",content:"Đăng nhập thành công. Bạn có thể tiếp tục sử dụng dịch vụ.",title:"Thành công"}),$("#modalLoginWithCredential").modal("hide"),A(),k("Bạn đã đăng nhập vào tài khoản VNU. Bạn có thể tiếp tục sử dụng dịch vụ.","success"),C(),f(!0)}).catch(t=>{S(t,"signin")})):(window.ContentHandler.ToggleLoading(a,!1),y())}),o.addEventListener("click",function(){window.ContentHandler.ToggleLoading(o,!0);var t=c.val();t&&t.match(n)||window.ContentHandler.ToggleValidation(c,!1),(V.checkValidity()?(NotificationHandler.show({type:"success",content:"Đăng nhập thành công. Bạn có thể tiếp tục sử dụng dịch vụ.",title:"Thành công"}),$("#modalLoginWithId").modal("hide"),q({username:t}),$("#mainTab li.list-group-item.idRequire").show(),k("Bạn đã sử dụng Mã sinh viên để đăng nhập. Một số tính năng sẽ bị giới hạn.","success"),C):(window.ContentHandler.ToggleLoading(o,!1),y))()}),s.addEventListener("keyup",function(t){"@"!=t.key||s.value.match(e)||(s.value+="vnu.edu.vn")}),$(document).ready(function(){1==(t=Date.now(),!!((e=H("vnutoken"))&&Math.abs(e?.expire-t)<h.TokenValidTime)||(n=e?"Phiên đăng nhập của bạn đã hết hạn. Vui lòng đăng nhập lại.":"Bạn hiện đang không đăng nhập vào tài khoản VNU. Vui lòng đăng nhập để tiếp tục.",f(!1),k(n,"error"),Math.abs(e?.expire-t)<h.TokenValidTime&&NotificationHandler.show({type:"error",content:n,title:"Hết hạn đăng nhập"}),T(),_(),!1))&&(A(),k("Bạn đã đăng nhập vào tài khoản VNU. Bạn có thể tiếp tục sử dụng dịch vụ.","success"),C()),p.off("keyup").on("keyup",function(t){"Enter"===t.key&&Q()}),b.off("click").on("click",Q),$("#map-tab").one("show.bs.tab",function(){$("#map-tab-pane .card-body").html(`
            <div nns-iframe-full nns-iframe-data="https://maps.inmapz.com/vnu-dai-hoc-quoc-gia-ha-noi-144-xuan-thuy-university-school-1260790695"></div>
            <div class="row mt-3">
                <div class="col-12">
                    <div class="mb-3 w-100 overflow-hidden position-relative text-center">
                        <img src="/static/media/uettoolkit/map.jpg" class="d-block position-relative w-100 rounded-4" title="VNU Map" alt="VNU Map" loading="lazy">
                    </div>
                </div>
            </div>`)}),$("#tailieu-tab").one("show.bs.tab",async function(){var t=await L("tailieu",h.API.getTailieu,!1,!1);$("#tailieu-table").bootstrapTable({...window.CustomBT_Config,cookieIdTable:"uet_tailieu_table",toolbar:"#tailieu-toolbar",data:t}),window.ContentHandler.ToggleMainContent("#uet_tailieu_card",!0)});var t,n,e=[{title:"Dùng UET Toolkit để làm gì?",content:"Ờ mình cũng không biết =)). Chỉ là muốn xem thông tin của trường mình chầm kảm quá. Có cả tí cái web mà mỗi cái lại mỗi kiểu giao diện cái dùng nhìn nó bị rối mắt ấy 🥹. Thay vào đó sao mình không thử gom lại một thể cho nó tiện nhỉ, mỗi lần muốn xem thông tin gì thì vào đăng nhập một cái là xong luôn."},{title:"Dùng cái này có bị hack acc VNU không?",content:`Nếu bạn nghĩ mình code cái này để hack acc các bạn thì hết cứu rồi 🥲. Mình chỉ lưu thông tin trên máy các bạn và gửi lên máy chủ VNU thôi chứ ngoài ra thì mình không gửi thêm gì nữa. Các bạn có thể dùng dev-tool để kiểm tra các request sau khi log acc mình vào để kiếm chứng nhe.
 ![hết cứu](/static/media/hetcuu.jpg)`},{title:"Các chức năng hiện tại của app này?",content:"Xem điểm(Tự động quy đổi sang điểm chữ), lịch học, lịch thi, thông tin cá nhân, chương trình đào tạo, check khả năng tốt nghiệp, thông tin khen thưởng kỷ luật, tư vấn học vụ. Có thể sẽ có thêm chức năng khác nếu mình có thời gian nghịch thêm."},{title:"Bạn làm web này trường có biết không?",content:"Mình cào chui API của phòng đào tạo đấy, không biết có bị đấm không 🥲🥲🥲🥲"},{title:"Mình có thể xem mã nguồn của web này không?",content:"hông"},{title:"Muốn biết thêm về quá trình code thì sao?",content:"Mình sẽ viết blog về quá trình code web này sau. Mọi người có thể cập nhật [trên đây nhé](/blog)"}];document.getElementById("accordionFaq").innerHTML=e.map((t,n)=>`<div class="accordion-item">
                <h2 class="accordion-header" id="heading${n}">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse${n}" aria-expanded="false" aria-controls="collapse${n}">
                        <strong>${t.title}</strong>
                    </button>
                </h2>
                <div id="collapse${n}" class="accordion-collapse collapse" aria-labelledby="heading${n}" data-bs-parent="#accordionFaq">
                    <div class="accordion-body" nns-markdown>
                        ${t.content}
                    </div>
                </div>
            </div>`).join("")})})();