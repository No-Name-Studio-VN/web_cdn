(()=>{$(".billing-address").on("click",function(){$(".billing-address-content").hide(),$(".payment-method-list").show()});var n=$("#confirmModal"),a=$(".validation-wizard").show();$(".validation-wizard").steps({headerTag:"h6",bodyTag:"section",transitionEffect:"fade",titleTemplate:'<span class="step">#index#</span> #title#',labels:{finish:"Submit"},onStepChanging:function(e,i,t){return t<i||!(3===t&&Number($("#age-2").val())<18)&&(i<t&&(a.find(".body:eq("+t+") label.error").remove(),a.find(".body:eq("+t+") .error").removeClass("error")),a.validate().settings.ignore=":disabled,:hidden",a.valid())},onFinishing:function(e,i){return a.validate().settings.ignore=":disabled",a.valid()},onFinished:function(e,i){n.modal("show")}}),$(".validation-wizard").validate({ignore:"input[type=hidden]",errorClass:"invalid-feedback",successClass:"text-success",highlight:function(e,i){$(e).removeClass(i)},unhighlight:function(e,i){$(e).removeClass(i)},errorPlacement:function(e,i){e.insertAfter(i)},rules:{email:{email:!0}}}),$("#submitform").on("click",function(e){e.preventDefault();var i,t=document.getElementById("addsub_form");t.checkValidity()?(t.classList.add("was-validated"),i=new FormData(t),(i=Object.fromEntries(i.entries())).save_main=!0,$.ajax({url:t.getAttribute("action"),contentType:"application/json",method:"POST",data:JSON.stringify(i),success:function(e){window.NotificationHandler.show({type:"success",content:"Guild redeemed successfully",title:"Guild Redeemed"}),window.location.href="/redeemsuccess?guildId="+e.data.guildId},error:function(e){window.NotificationHandler.show({type:"error",content:e.responseJSON.error,title:"Unable to redeem guild"}),n.modal("hide")}})):(e.preventDefault(),e.stopPropagation())})})();